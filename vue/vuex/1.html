<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>资料库</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <link rel="icon" href="/longweixia/favicon.ico">
    <meta name="description" content="10点读书">
    
    <link rel="preload" href="/longweixia/assets/css/0.styles.e7f35309.css" as="style"><link rel="preload" href="/longweixia/assets/js/app.30853e2a.js" as="script"><link rel="preload" href="/longweixia/assets/js/2.19b4ab8a.js" as="script"><link rel="preload" href="/longweixia/assets/js/76.f804ad10.js" as="script"><link rel="prefetch" href="/longweixia/assets/js/10.17389278.js"><link rel="prefetch" href="/longweixia/assets/js/11.13e843aa.js"><link rel="prefetch" href="/longweixia/assets/js/12.9ad5d840.js"><link rel="prefetch" href="/longweixia/assets/js/13.79fcf880.js"><link rel="prefetch" href="/longweixia/assets/js/14.c4361c82.js"><link rel="prefetch" href="/longweixia/assets/js/15.44426049.js"><link rel="prefetch" href="/longweixia/assets/js/16.581eff27.js"><link rel="prefetch" href="/longweixia/assets/js/17.d109ff42.js"><link rel="prefetch" href="/longweixia/assets/js/18.3ec7fcf3.js"><link rel="prefetch" href="/longweixia/assets/js/19.35fd21bb.js"><link rel="prefetch" href="/longweixia/assets/js/20.66a6e34b.js"><link rel="prefetch" href="/longweixia/assets/js/21.71051137.js"><link rel="prefetch" href="/longweixia/assets/js/22.9869167b.js"><link rel="prefetch" href="/longweixia/assets/js/23.2ca1aaba.js"><link rel="prefetch" href="/longweixia/assets/js/24.2232ffb7.js"><link rel="prefetch" href="/longweixia/assets/js/25.e0f0715a.js"><link rel="prefetch" href="/longweixia/assets/js/26.f5c106a0.js"><link rel="prefetch" href="/longweixia/assets/js/27.9e31faa4.js"><link rel="prefetch" href="/longweixia/assets/js/28.113fc19e.js"><link rel="prefetch" href="/longweixia/assets/js/29.bc167a67.js"><link rel="prefetch" href="/longweixia/assets/js/3.88b3d293.js"><link rel="prefetch" href="/longweixia/assets/js/30.03a76239.js"><link rel="prefetch" href="/longweixia/assets/js/31.c81c40f1.js"><link rel="prefetch" href="/longweixia/assets/js/32.bd90225a.js"><link rel="prefetch" href="/longweixia/assets/js/33.1d2874e8.js"><link rel="prefetch" href="/longweixia/assets/js/34.b5be839b.js"><link rel="prefetch" href="/longweixia/assets/js/35.346f3036.js"><link rel="prefetch" href="/longweixia/assets/js/36.81c5024f.js"><link rel="prefetch" href="/longweixia/assets/js/37.c67ed549.js"><link rel="prefetch" href="/longweixia/assets/js/38.77987057.js"><link rel="prefetch" href="/longweixia/assets/js/39.9c901ab8.js"><link rel="prefetch" href="/longweixia/assets/js/4.793f9f6e.js"><link rel="prefetch" href="/longweixia/assets/js/40.3bf5737a.js"><link rel="prefetch" href="/longweixia/assets/js/41.10d00b34.js"><link rel="prefetch" href="/longweixia/assets/js/42.d1c1060a.js"><link rel="prefetch" href="/longweixia/assets/js/43.f8e83df1.js"><link rel="prefetch" href="/longweixia/assets/js/44.0da5d0cd.js"><link rel="prefetch" href="/longweixia/assets/js/45.94d21e4f.js"><link rel="prefetch" href="/longweixia/assets/js/46.9d1beff0.js"><link rel="prefetch" href="/longweixia/assets/js/47.adbb41c5.js"><link rel="prefetch" href="/longweixia/assets/js/48.905e25b7.js"><link rel="prefetch" href="/longweixia/assets/js/49.2763efa3.js"><link rel="prefetch" href="/longweixia/assets/js/5.e7ca5135.js"><link rel="prefetch" href="/longweixia/assets/js/50.ffe0192f.js"><link rel="prefetch" href="/longweixia/assets/js/51.b4a8bbd5.js"><link rel="prefetch" href="/longweixia/assets/js/52.3bf3d83c.js"><link rel="prefetch" href="/longweixia/assets/js/53.c938b0b0.js"><link rel="prefetch" href="/longweixia/assets/js/54.a12149e7.js"><link rel="prefetch" href="/longweixia/assets/js/55.2f8f4d12.js"><link rel="prefetch" href="/longweixia/assets/js/56.b040f922.js"><link rel="prefetch" href="/longweixia/assets/js/57.3565cde1.js"><link rel="prefetch" href="/longweixia/assets/js/58.ddccb3ba.js"><link rel="prefetch" href="/longweixia/assets/js/59.052024c3.js"><link rel="prefetch" href="/longweixia/assets/js/6.a797012b.js"><link rel="prefetch" href="/longweixia/assets/js/60.6ef28404.js"><link rel="prefetch" href="/longweixia/assets/js/61.512be1bf.js"><link rel="prefetch" href="/longweixia/assets/js/62.6e05c141.js"><link rel="prefetch" href="/longweixia/assets/js/63.ca304a0d.js"><link rel="prefetch" href="/longweixia/assets/js/64.6477c58d.js"><link rel="prefetch" href="/longweixia/assets/js/65.e0da78df.js"><link rel="prefetch" href="/longweixia/assets/js/66.e109c264.js"><link rel="prefetch" href="/longweixia/assets/js/67.e498d6df.js"><link rel="prefetch" href="/longweixia/assets/js/68.276ed907.js"><link rel="prefetch" href="/longweixia/assets/js/69.2bc6a533.js"><link rel="prefetch" href="/longweixia/assets/js/7.55c60d55.js"><link rel="prefetch" href="/longweixia/assets/js/70.bb6787af.js"><link rel="prefetch" href="/longweixia/assets/js/71.5ac32627.js"><link rel="prefetch" href="/longweixia/assets/js/72.ba9cb06b.js"><link rel="prefetch" href="/longweixia/assets/js/73.fe9c59de.js"><link rel="prefetch" href="/longweixia/assets/js/74.ecb3f57f.js"><link rel="prefetch" href="/longweixia/assets/js/75.0169e10d.js"><link rel="prefetch" href="/longweixia/assets/js/77.49c57594.js"><link rel="prefetch" href="/longweixia/assets/js/78.a2f5ab6e.js"><link rel="prefetch" href="/longweixia/assets/js/79.acb9ebc0.js"><link rel="prefetch" href="/longweixia/assets/js/8.cce1d689.js"><link rel="prefetch" href="/longweixia/assets/js/80.8d936fe0.js"><link rel="prefetch" href="/longweixia/assets/js/81.0e3986b9.js"><link rel="prefetch" href="/longweixia/assets/js/82.774d6e22.js"><link rel="prefetch" href="/longweixia/assets/js/83.c0ddf8bb.js"><link rel="prefetch" href="/longweixia/assets/js/84.5a58253a.js"><link rel="prefetch" href="/longweixia/assets/js/85.20ba04b9.js"><link rel="prefetch" href="/longweixia/assets/js/9.023f9158.js">
    <link rel="stylesheet" href="/longweixia/assets/css/0.styles.e7f35309.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/longweixia/" class="home-link router-link-active"><!----> <span class="site-name">资料库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/longweixia/html/" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/longweixia/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/longweixia/js/" class="nav-link">
  JS
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/longweixia/html/" class="nav-link">
  HTML
</a></div><div class="nav-item"><a href="/longweixia/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/longweixia/js/" class="nav-link">
  JS
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/longweixia/html/" class="sidebar-heading clickable open"><span>1. HTML</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/longweixia/html/Html/1.html" class="sidebar-link">基础1</a></li><li><a href="/longweixia/html/Html/2.html" class="sidebar-link">基础2</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>面试</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/longweixia/css/" class="sidebar-heading clickable"><span>2. CSS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/longweixia/js/" class="sidebar-heading clickable"><span>3. JS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/longweixia/vue/" class="sidebar-heading clickable router-link-active"><span>4. Vue</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/longweixia/ts/" class="sidebar-heading clickable"><span>5. TS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/longweixia/node/" class="sidebar-heading clickable"><span>6. Node</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/longweixia/business/" class="sidebar-heading clickable"><span>7. 业务</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/longweixia/tools/" class="sidebar-heading clickable"><span>8. 工具</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/longweixia/browser/" class="sidebar-heading clickable"><span>9. 浏览器</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/longweixia/vuePress/" class="sidebar-heading clickable"><span>10. vuePress</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/longweixia/xcx/" class="sidebar-heading clickable"><span>11. 小程序</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/longweixia/note/" class="sidebar-heading clickable"><span>12. 总结</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><section id="nice" data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="font-size:16px;padding:0 10px;word-spacing:0px;word-break:break-word;word-wrap:break-word;text-align:left;line-height:1.25;color:#2b2b2b;font-family:Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light, PingFangTC-light;letter-spacing:2px;background-image:linear-gradient(90deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%);background-size:20px 20px;background-position:center center;"><h2 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:22px;display:block;border-bottom:4px solid #40B8FA;"><span class="prefix" style="display:flex;width:20px;height:20px;background-size:20px 20px;background-image:url(https://my-wechat.mdnice.com/fullstack-1.png);margin-bottom:-22px;"></span><span class="content" style="display:flex;color:#40B8FA;font-size:20px;margin-left:25px;">Vuex</span><span class="suffix" style="display:flex;box-sizing:border-box !important;width:200px;height:10px;border-top-left-radius:20px;background:RGBA(64, 184, 250, .5);color:rgb(255, 255, 255);font-size:16px;letter-spacing:0.544px;justify-content:flex-end;float:right;margin-top:-10px;overflow-wrap:break-word !important;"></span></h2> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">上一个项目没用Vuex，几百万行代码的编辑器，全程用的eventBus，照样很香。
为什么不用呢？因为一开始就没想过用，等到项目快完成了，没人愿意换了。</p> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">现在这个项目全局用的是Vuex，好不好用呢？</p> <h3 data-tool="mdnice编辑器" style="padding:0px;color:black;font-size:17px;font-weight:bold;text-align:center;position:relative;margin-top:20px;margin-bottom:20px;"><span class="prefix" style="display:none;"></span><span class="content" style="border-bottom:2px solid RGBA(79, 177, 249, .65);color:#2b2b2b;padding-bottom:2px;"><span style="width:30px;height:30px;display:block;background-image:url(https://my-wechat.mdnice.com/fullstack-2.png);background-position:center;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px;"></span>1.背景</span><span class="suffix" style="display:none;"></span></h3> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">当我们的应用遇到多个组件共享状态时，单向数据流的简洁性很容易被破坏：</p> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;font-size:15px;color:#595959;list-style-type:circle;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">多个视图依赖于同一状态。</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">来自不同视图的行为需要变更同一状态。<br>
对于问题一，传参的方法对于多层嵌套的组件将会非常繁琐，并且对于兄弟组件间的状态传递无能为力。</section></li></ul> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">对于问题二，我们经常会采用父子组件直接引用或者通过事件来变更和同步状态的多份拷贝。以上的这些模式非常脆弱，通常会导致无法维护的代码。</p> <h3 data-tool="mdnice编辑器" style="padding:0px;color:black;font-size:17px;font-weight:bold;text-align:center;position:relative;margin-top:20px;margin-bottom:20px;"><span class="prefix" style="display:none;"></span><span class="content" style="border-bottom:2px solid RGBA(79, 177, 249, .65);color:#2b2b2b;padding-bottom:2px;"><span style="width:30px;height:30px;display:block;background-image:url(https://my-wechat.mdnice.com/fullstack-2.png);background-position:center;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px;"></span>2. 什么是Vuex</span><span class="suffix" style="display:none;"></span></h3> <blockquote data-tool="mdnice编辑器" class="multiquote-1" style="display:block;font-size:0.9em;overflow:auto;overflow-scrolling:touch;padding-top:10px;padding-bottom:10px;padding-left:20px;padding-right:10px;margin-bottom:20px;margin-top:20px;text-size-adjust:100%;line-height:1.55em;font-weight:400;border-radius:6px;color:#595959;font-style:normal;text-align:left;box-sizing:inherit;border-left:none;border:1px solid RGBA(64, 184, 250, .4);background:RGBA(64, 184, 250, .1);"><span style="color:RGBA(64, 184, 250, .5);font-size:34px;line-height:1;font-weight:700;">❝</span> <p style="padding-top:8px;padding-bottom:8px;letter-spacing:2px;font-size:14px;word-spacing:2px;margin:0px;line-height:26px;color:#595959;">Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。</p> <span style="float:right;color:RGBA(64, 184, 250, .5);">❞</span></blockquote> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">也就是说 Vuex 用于单页面应用组件之间的数据共享，在组件嵌套很多层的情况下，Vue 中父子组件的通信过程就变得很麻烦，此时使用 Vuex 方便了组件间的通信。</p> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;font-size:15px;color:#595959;list-style-type:circle;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">HTML5 提供的数据存取机制 localStorage ，localStorage 存储的数据存在浏览器中，也就是本地磁盘中，localStorage 多数情况用于页面之间传递数据。</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">Vuex 是将数据存储在了内存中，每一次刷新页面，之前存在 Vuex 中的数据就会重新初始化。</section></li></ul> <h3 data-tool="mdnice编辑器" style="padding:0px;color:black;font-size:17px;font-weight:bold;text-align:center;position:relative;margin-top:20px;margin-bottom:20px;"><span class="prefix" style="display:none;"></span><span class="content" style="border-bottom:2px solid RGBA(79, 177, 249, .65);color:#2b2b2b;padding-bottom:2px;"><span style="width:30px;height:30px;display:block;background-image:url(https://my-wechat.mdnice.com/fullstack-2.png);background-position:center;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px;"></span>3. Vuex的优缺点</span><span class="suffix" style="display:none;"></span></h3> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>vuex的优点<span>」</span></strong>：</p> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;font-size:15px;color:#595959;list-style-type:circle;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">js 原生的数据对象写法, 比起 localStorage 不需要做转换, 使用方便</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">属于 vue 生态一环, 能够触发响应式的渲染页面更新 (localStorage 就不会)</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">限定了一种可预测的方式改变数据, 避免大项目中, 数据不小心的污染</section></li></ul> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>vuex的缺点<span>」</span></strong>：</p> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;font-size:15px;color:#595959;list-style-type:circle;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">刷新浏览器，vuex中的state会重新变为初始状态 (解决方案-插件<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:#3594F7;background:RGBA(59, 170, 250, .1);padding:0 2px;border-radius:2px;height:21px;line-height:22px;">vuex-persistedstate</code>)</section></li></ul> <h3 data-tool="mdnice编辑器" style="padding:0px;color:black;font-size:17px;font-weight:bold;text-align:center;position:relative;margin-top:20px;margin-bottom:20px;"><span class="prefix" style="display:none;"></span><span class="content" style="border-bottom:2px solid RGBA(79, 177, 249, .65);color:#2b2b2b;padding-bottom:2px;"><span style="width:30px;height:30px;display:block;background-image:url(https://my-wechat.mdnice.com/fullstack-2.png);background-position:center;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px;"></span>4. 为什么要用Vuex，它解决了什么问题</span><span class="suffix" style="display:none;"></span></h3> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;font-size:15px;color:#595959;list-style-type:circle;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">多个组件依赖于同一状态时，对于多层嵌套的组件的传参将会非常繁琐，并且对于兄弟组件间的状态传递无能为力。</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">来自不同组件的行为需要变更同一状态。以往采用父子组件直接引用或者通过事件来变更和同步状态的多份拷贝。以上的这些模式非常脆弱，通常会导致无法维护的代码。</section></li></ul> <h3 data-tool="mdnice编辑器" style="padding:0px;color:black;font-size:17px;font-weight:bold;text-align:center;position:relative;margin-top:20px;margin-bottom:20px;"><span class="prefix" style="display:none;"></span><span class="content" style="border-bottom:2px solid RGBA(79, 177, 249, .65);color:#2b2b2b;padding-bottom:2px;"><span style="width:30px;height:30px;display:block;background-image:url(https://my-wechat.mdnice.com/fullstack-2.png);background-position:center;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px;"></span>5.简单使用 (超级丐中丐版)</span><span class="suffix" style="display:none;"></span></h3> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>（1）安装Vuex<span>」</span></strong></p> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">npm install vuex</p> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>（2）新建Vuex文件<span>」</span></strong></p> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">在src目录下新建store.js</p> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>（3）编写store.js中的Vuex内容<span>」</span></strong></p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">import Vue from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vue'</span><br>import Vuex from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vuex'</span><br><br>Vue.use(Vuex)<br><br>const state = {    // 组件间共享的数据<br>    msg: <span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;你好&quot;</span><br>}<br><br>const getters = { // 获取共享数据<br>    getList: state =&gt; {<br>        <span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">return</span> state.list +<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;吗&quot;</span><br>    }<br>}<br><br>const mutations = { // 修改共享数据<br>    setList: (state, value) =&gt; {    //value就是外部调用传进来的值<br>        state.list = value<br>    }<br>}<br><br>actions:{<br>    changeList(context,value){<br>      /**<br>       * 模拟异步的过程，2000毫秒后通过commit()方法执行mumations中的setList方法改变数据<br>       * 同样，value可以是单数据或通过对象的方式，传递多个数据<br>       * 这里只举例通过对象传递多数据的情况<br>       */<br>      setTimeout(()=&gt;{<br>        context.commit(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;setList&quot;</span>,value)<br>      },2000)<br>    }<br>  }<br><br><br><span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">export</span> default new Vuex.Store({<br>    state,<br>    getters,<br>    mutations,<br>    actions<br>})<br></code></pre> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>（4）main.js 引入Vuex文件<span>」</span></strong></p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">import store from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;@/store&quot;</span>; //引入src下的store.js文件<br>new Vue({<br>  router,<br>  store,  //注入Vuex<br>  i18n,<br>  render: h =&gt; h(App),<br>}).<span class="hljs-variable" style="color:#a6e22e;line-height:26px;">$mount</span>(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">'#app'</span>)<br></code></pre> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>（5）外部的vue组件去调用Vuex<span>」</span></strong></p> <blockquote data-tool="mdnice编辑器" class="multiquote-1" style="display:block;font-size:0.9em;overflow:auto;overflow-scrolling:touch;padding-top:10px;padding-bottom:10px;padding-left:20px;padding-right:10px;margin-bottom:20px;margin-top:20px;text-size-adjust:100%;line-height:1.55em;font-weight:400;border-radius:6px;color:#595959;font-style:normal;text-align:left;box-sizing:inherit;border-left:none;border:1px solid RGBA(64, 184, 250, .4);background:RGBA(64, 184, 250, .1);"><span style="color:RGBA(64, 184, 250, .5);font-size:34px;line-height:1;font-weight:700;">❝</span> <p style="padding-top:8px;padding-bottom:8px;letter-spacing:2px;font-size:14px;word-spacing:2px;margin:0px;line-height:26px;color:#595959;">a.vue 文件中设置共享数据list</p> <span style="float:right;color:RGBA(64, 184, 250, .5);">❞</span></blockquote> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">    &lt;script&gt;<br>    //mapMutations是vuex的mutation的辅助函数,用于在组件中映射mutation内的方法<br>    //以便在该组件中直接使用mutation里的方法 (说白了，就是一语法糖)，本质上等同于：<br>    //this.setList === this.<span class="hljs-variable" style="color:#a6e22e;line-height:26px;">$store</span>.commit(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">'setList'</span>) //<span class="hljs-literal" style="color:#f92672;font-weight:bold;line-height:26px;">true</span><br><br>    import { mapMutations } from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vuex'</span> <br>    <span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">export</span> default {<br>        <span class="hljs-function" style="line-height:26px;"><span class="hljs-title" style="color:#a6e22e;font-weight:bold;line-height:26px;">mounted</span></span> () {<br>            this.setList([<span class="hljs-string" style="color:#a6e22e;line-height:26px;">'hello'</span>])<br>        },<br>        methods: {<br>            ...mapMutations([<span class="hljs-string" style="color:#a6e22e;line-height:26px;">'setList'</span>])<br>        }<br>    }<br>    &lt;/script&gt;<br><br></code></pre> <blockquote data-tool="mdnice编辑器" class="multiquote-1" style="display:block;font-size:0.9em;overflow:auto;overflow-scrolling:touch;padding-top:10px;padding-bottom:10px;padding-left:20px;padding-right:10px;margin-bottom:20px;margin-top:20px;text-size-adjust:100%;line-height:1.55em;font-weight:400;border-radius:6px;color:#595959;font-style:normal;text-align:left;box-sizing:inherit;border-left:none;border:1px solid RGBA(64, 184, 250, .4);background:RGBA(64, 184, 250, .1);"><span style="color:RGBA(64, 184, 250, .5);font-size:34px;line-height:1;font-weight:700;">❝</span> <p style="padding-top:8px;padding-bottom:8px;letter-spacing:2px;font-size:14px;word-spacing:2px;margin:0px;line-height:26px;color:#595959;">b.vue 文件中获取共享数据list</p> <span style="float:right;color:RGBA(64, 184, 250, .5);">❞</span></blockquote> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">&lt;script&gt;<br>import { mapGetters } from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vuex'</span> //mapGetters是getters的语法糖,<br>import { mapState } from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vuex'</span>  //mapState是state的语法糖,<br><span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">export</span> default {<br>     computed: {<br>        ...mapGetters([<span class="hljs-string" style="color:#a6e22e;line-height:26px;">'getList'</span> ])<br>     },<br>     <span class="hljs-function" style="line-height:26px;"><span class="hljs-title" style="color:#a6e22e;font-weight:bold;line-height:26px;">mounted</span></span> () {<br>        console.log(this.getList)               // [<span class="hljs-string" style="color:#a6e22e;line-height:26px;">'你好吗'</span>]<br>        console.log(this.<span class="hljs-variable" style="color:#a6e22e;line-height:26px;">$store</span>.state.list)     // [<span class="hljs-string" style="color:#a6e22e;line-height:26px;">'hello'</span>]<br>        console.log(this.getList)               // [<span class="hljs-string" style="color:#a6e22e;line-height:26px;">'hello吗'</span>]<br>     }<br>}<br>&lt;/script&gt;<br></code></pre> <h3 data-tool="mdnice编辑器" style="padding:0px;color:black;font-size:17px;font-weight:bold;text-align:center;position:relative;margin-top:20px;margin-bottom:20px;"><span class="prefix" style="display:none;"></span><span class="content" style="border-bottom:2px solid RGBA(79, 177, 249, .65);color:#2b2b2b;padding-bottom:2px;"><span style="width:30px;height:30px;display:block;background-image:url(https://my-wechat.mdnice.com/fullstack-2.png);background-position:center;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px;"></span>6. Vuex的5大属性</span><span class="suffix" style="display:none;"></span></h3> <blockquote data-tool="mdnice编辑器" class="multiquote-1" style="display:block;font-size:0.9em;overflow:auto;overflow-scrolling:touch;padding-top:10px;padding-bottom:10px;padding-left:20px;padding-right:10px;margin-bottom:20px;margin-top:20px;text-size-adjust:100%;line-height:1.55em;font-weight:400;border-radius:6px;color:#595959;font-style:normal;text-align:left;box-sizing:inherit;border-left:none;border:1px solid RGBA(64, 184, 250, .4);background:RGBA(64, 184, 250, .1);"><span style="color:RGBA(64, 184, 250, .5);font-size:34px;line-height:1;font-weight:700;">❝</span> <p style="padding-top:8px;padding-bottom:8px;letter-spacing:2px;font-size:14px;word-spacing:2px;margin:0px;line-height:26px;color:#595959;">通过以上的简单案例，可以看到，Vuex在简单场景下还是和好理解的，管理起来也很清晰。
拆开看，每个属性都比较简单。</p> <span style="float:right;color:RGBA(64, 184, 250, .5);">❞</span></blockquote> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>6-1. state</span><span class="suffix" style="display:none;"></span></h4> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;font-size:15px;color:#595959;list-style-type:circle;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">state是一个数据存储的仓库，所有的数据源都会存放在这里，就类似组件中的data。</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">在store.js的state中的数据，可以在任意组件中通过this.$store.state访问到。</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">相比EventBus，需要到处去调用<span class="span-inline-equation" style="cursor:pointer;"><img data-eeimg="true" src="" alt="emit和" class="Formula-image" style="max-width:100%;border-radius:6px;display:block;margin:20px auto;object-fit:contain;box-shadow:2px 4px 7px #999;"></span>on方法去监听数据和拷贝数据副本，做到了数据和视图层的解耦。</section></li></ul> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">如：我们可以在a.vue中直接获取到list</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">console.log(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;list======&quot;</span>+this.<span class="hljs-variable" style="color:#a6e22e;line-height:26px;">$store</span>.state.list)<br></code></pre> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>6-2. Getter</span><span class="suffix" style="display:none;"></span></h4> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;font-size:15px;color:#595959;list-style-type:circle;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">getter主要用于在获取数据时，对数据进行加工后返回。</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">与EventBus相比，通过Vuex的Getter，我们可以在Store中对数据做统一加工处理，利于日后的项目维护。
如： 我们打印出Getter</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">console.log(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;getList======&quot;</span>+this.<span class="hljs-variable" style="color:#a6e22e;line-height:26px;">$store</span>.getters.getList)<br></code></pre> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>6-3. Mutation</span><span class="suffix" style="display:none;"></span></h4> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;font-size:15px;color:#595959;list-style-type:circle;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">通过Mutation我们可以对数据仓中的数据进行修改，我们可以在组建中通过调用this.$store.commit()方法去调用对应的Mutation去修改数据。</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">Mutation中只能执行<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:#3594F7;background:RGBA(59, 170, 250, .1);padding:0 2px;border-radius:2px;height:21px;line-height:22px;">同步</code>的方法，如果需要执行异步方法，我们要使用接下来即将登场的Action。</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">通过<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:#3594F7;background:RGBA(59, 170, 250, .1);padding:0 2px;border-radius:2px;height:21px;line-height:22px;">this.$store.commit()</code>去调用Action的方法。</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">//注意，当我们需要传多个参数的时候，就需要把参数放到一个对象中<br> this.<span class="hljs-variable" style="color:#a6e22e;line-height:26px;">$store</span>.commit(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;setList&quot;</span>,{<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;msg1&quot;</span>:<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;早上好&quot;</span>,<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;msg2&quot;</span>:<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;，吃饭吗&quot;</span>})<br> console.log(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;list======&quot;</span>+this.<span class="hljs-variable" style="color:#a6e22e;line-height:26px;">$store</span>.state.list.msg1)  //早上好<br></code></pre> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>6-4. Action</span><span class="suffix" style="display:none;"></span></h4> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;font-size:15px;color:#595959;list-style-type:circle;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">Action和Mutation类似，它只是能够处理<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:#3594F7;background:RGBA(59, 170, 250, .1);padding:0 2px;border-radius:2px;height:21px;line-height:22px;">异步</code>的情况，<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:#3594F7;background:RGBA(59, 170, 250, .1);padding:0 2px;border-radius:2px;height:21px;line-height:22px;">最终通过commit(</code>)函数调用Mutation去修改数据。</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">通过<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:#3594F7;background:RGBA(59, 170, 250, .1);padding:0 2px;border-radius:2px;height:21px;line-height:22px;">this.$store.dispatch()</code>去调用Action的方法。</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">//通过Action修改数据<br>    this.<span class="hljs-variable" style="color:#a6e22e;line-height:26px;">$store</span>.dispatch(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;changeList&quot;</span>,{<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;msg&quot;</span>:<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;action修改后的数据&quot;</span>})<br>    setTimeout(()=&gt;{<br>      console.log(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;1秒后list======&quot;</span>+this.<span class="hljs-variable" style="color:#a6e22e;line-height:26px;">$store</span>.state.list.msg)  //你好action修改后的数据<br>    },1000)<br></code></pre> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>6-5. Module</span><span class="suffix" style="display:none;"></span></h4> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">当我们项目比较小的时候，直接创建一个Vuex文件就可以了，所有的方法数据都写在一起。</p> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">但是，当我们项目越来越大时，我们这个Store中的state和Mutation、Getter、Action的数量和Store的代码行数就会爆炸性的增加，使得我们的Store变得维护困难。这时候我们就需要对Vuex就行模块化了。</p> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">这时候，我们希望把Store模块化，然后通过Module整合在一起，例如不同子组件的数据抽取出来写成单独的一个Store。</p> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">这时候我们就需要通过Module整合各个模块，然后在将Store挂在在根组件下。</p> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>现在我们创建3个新的Store文件<span>」</span></strong>：</p> <ol data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;list-style-type:decimal;font-size:15px;color:#595959;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">index.js   Store，主要负责整合所有的Store模块。</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">a.js, 主要负责a.vue的数据维护</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">b.js，主要负责b.vue子组件的数据维护</section></li></ol> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>首先我们来看a.js和b.js<span>」</span></strong>：</p> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>a.js<span>」</span></strong></p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;"><span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">export</span> default {<br>  state: {<br>    text:<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;&quot;</span><br>  },<br>  getters:{<br>    gettext(state){<br>      <span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">return</span> state.text;<br>    }<br>  },<br>  mutations:{<br>    changetext(state,payload){<br>      state.text=payload<br>    }<br>  }<br>}<br></code></pre> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>b.js<span>」</span></strong></p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;"><span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">export</span> default {<br>  state: {<br>    bText:[]<br>  },<br>  getters:{<br>    getbText(state){<br>      <span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">return</span> state.bText;<br>    }<br>  },<br>  mutations:{<br>    changebText(state,payload){<br>      state.text.push(payload)<br>    }<br>  }<br>}<br></code></pre> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">这里，我们只是通过export default将a和b输出。
接下来让我们看index.js,它将a.js和b.js整合在一起</p> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>index.js<span>」</span></strong></p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">import Vue from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vue'</span><br>import vuex from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vuex'</span><br>import a from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'./a'</span><br>import b from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'./b'</span><br>Vue.use(vuex)<br><span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">export</span> default new vuex.Store({<br>  modules:{<br>    a:a,<br>    b:b<br>  }<br>})<br></code></pre> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">在index中我们首先将a.js和b.js通过import引入，然后在Store的modules中将它们两引入。
接下来我们将index.js挂载在根组件下，我们修改一下main.js：</p> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>main.js<span>」</span></strong></p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">import Vue from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vue'</span><br>import App from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'./App'</span><br>import router from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'./router'</span><br>import vueResource from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vue-resource'</span><br>import store from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'./store/index'</span>   //引用index.js<br>// import searchStore from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'./store/SearchStore'</span><br>Vue.use(vueResource)<br>Vue.config.productionTip = <span class="hljs-literal" style="color:#f92672;font-weight:bold;line-height:26px;">false</span><br><br>new Vue({<br>  el: <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'#app'</span>,<br>  router,<br>  store,    //修改部分，简写<br>  components: { App },<br>  template: <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'&lt;App/&gt;'</span><br>})<br></code></pre> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">这样我们就成功整合了两个Store模块，需要注意的是接下来我们访问state对象的对象时，需要加上模块名：<br>
例如，我们要访问a的text的数据时，我们需要使用<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:#3594F7;background:RGBA(59, 170, 250, .1);padding:0 2px;border-radius:2px;height:21px;line-height:22px;">this.$store.state.a.text</code>进行访问。</p> <h3 data-tool="mdnice编辑器" style="padding:0px;color:black;font-size:17px;font-weight:bold;text-align:center;position:relative;margin-top:20px;margin-bottom:20px;"><span class="prefix" style="display:none;"></span><span class="content" style="border-bottom:2px solid RGBA(79, 177, 249, .65);color:#2b2b2b;padding-bottom:2px;"><span style="width:30px;height:30px;display:block;background-image:url(https://my-wechat.mdnice.com/fullstack-2.png);background-position:center;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px;"></span>7. Vuex的辅助函数</span><span class="suffix" style="display:none;"></span></h3> <blockquote data-tool="mdnice编辑器" class="multiquote-1" style="display:block;font-size:0.9em;overflow:auto;overflow-scrolling:touch;padding-top:10px;padding-bottom:10px;padding-left:20px;padding-right:10px;margin-bottom:20px;margin-top:20px;text-size-adjust:100%;line-height:1.55em;font-weight:400;border-radius:6px;color:#595959;font-style:normal;text-align:left;box-sizing:inherit;border-left:none;border:1px solid RGBA(64, 184, 250, .4);background:RGBA(64, 184, 250, .1);"><span style="color:RGBA(64, 184, 250, .5);font-size:34px;line-height:1;font-weight:700;">❝</span> <p style="padding-top:8px;padding-bottom:8px;letter-spacing:2px;font-size:14px;word-spacing:2px;margin:0px;line-height:26px;color:#595959;">import {mapState, mapGetters, mapMutations, mapActions } from &quot;vuex&quot;; //引入辅助函数</p> <span style="float:right;color:RGBA(64, 184, 250, .5);">❞</span></blockquote> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>(1)mapState</span><span class="suffix" style="display:none;"></span></h4> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">computed: {<br>  localComputed () //本地计算属性<br>  //使用对象展开运算符将此对象混入到外部对象中<br>  ...mapState({<br>    //..<br>  })<br></code></pre> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>(2)mapGetters</span><span class="suffix" style="display:none;"></span></h4> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;">辅助函数仅仅是将 store 中的 getters 映射到局部计算属性，与state类似</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">import { mapGetters } from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vuex'</span><br> <br><span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">export</span> default {<br>  // ...<br>  computed: {<br>  // 使用对象展开运算符将 getters 混入 computed 对象中<br>    ...mapGetters([<br>      <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'a'</span>,<br>      <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'b'</span>,<br>      //..<br>    ])<br>  }<br><br></code></pre> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>(3)mapMutations</span><span class="suffix" style="display:none;"></span></h4> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">import { mapMutations } from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vuex'</span><br> <br><span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">export</span> default {<br>  //..<br>  methods: {<br>    ...mapMutations([<br>      <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'increment'</span> // 映射 this.increment() 为 this.<span class="hljs-variable" style="color:#a6e22e;line-height:26px;">$store</span>.commit(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">'increment'</span>)<br>    ]),<br>  }<br><br></code></pre> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>(4)mapActions</span><span class="suffix" style="display:none;"></span></h4> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">import { mapActions } from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vuex'</span><br> <br><span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">export</span> default {<br>  //..<br>  methods: {<br>    ...mapActions([<br>      <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'incrementN'</span> //映射 this.incrementN() 为 this.<span class="hljs-variable" style="color:#a6e22e;line-height:26px;">$store</span>.dispatch(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">'incrementN'</span>)<br>    ])<br>  }<br><br></code></pre> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>text.vue  组件中使用模块化的Vuex<span>」</span></strong></p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">import { mapGetters, mapMutations, mapActions } from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;vuex&quot;</span>;<br>  <span class="hljs-function" style="line-height:26px;"><span class="hljs-title" style="color:#a6e22e;font-weight:bold;line-height:26px;">mounted</span></span>() {<br>        this.tabsValue = this.tabs  //使用注册后的tabs计算属性  <br>  },<br><br>  computed: {<br>       // myOrder是Vuex定义的模块名，这里指注册myOrder.js 中的 tabs<br>    ...mapGetters(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">'myOrder'</span>, [<span class="hljs-string" style="color:#a6e22e;line-height:26px;">'tabs'</span>]), <br>  },<br>  methods: {<br>      // myOrder是Vuex定义的模块名，这里指注册myOrder.js 中setTabs方法<br>    ...mapMutations(<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;myOrder&quot;</span>, [<span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;setTabs&quot;</span>])  <br><br>    tabsClick(value) {<br>      this.setTabs(value)  // 使用上面注册的setTabs方法<br>    }<br>  }<br><br></code></pre> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><strong style="color:#3594F7;font-weight:bold;"><span>「</span>定义的Vuex 其中的一个模块  myOrder.js<span>」</span></strong></p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;"><br>// 我的订单<br>const myOrder = {<br>  // 设置命名空间<br>  namespaced: <span class="hljs-literal" style="color:#f92672;font-weight:bold;line-height:26px;">true</span>,<br>  state: {<br>    tabs: 0<br>  },<br>  getters: {<br>    tabs: state =&gt; state.tabs,<br>  },<br>  mutations: {<br>    setTabs(state, tabs = {}) {<br>      state.tabs = tabs<br>    },<br>  },<br>  actions: {<br><br>  }<br>}<br><span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">export</span> default myOrder;<br></code></pre> <h3 data-tool="mdnice编辑器" style="padding:0px;color:black;font-size:17px;font-weight:bold;text-align:center;position:relative;margin-top:20px;margin-bottom:20px;"><span class="prefix" style="display:none;"></span><span class="content" style="border-bottom:2px solid RGBA(79, 177, 249, .65);color:#2b2b2b;padding-bottom:2px;"><span style="width:30px;height:30px;display:block;background-image:url(https://my-wechat.mdnice.com/fullstack-2.png);background-position:center;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px;"></span>8. Vuex的插件--打印日志createLogger</span><span class="suffix" style="display:none;"></span></h3> <blockquote data-tool="mdnice编辑器" class="multiquote-1" style="display:block;font-size:0.9em;overflow:auto;overflow-scrolling:touch;padding-top:10px;padding-bottom:10px;padding-left:20px;padding-right:10px;margin-bottom:20px;margin-top:20px;text-size-adjust:100%;line-height:1.55em;font-weight:400;border-radius:6px;color:#595959;font-style:normal;text-align:left;box-sizing:inherit;border-left:none;border:1px solid RGBA(64, 184, 250, .4);background:RGBA(64, 184, 250, .1);"><span style="color:RGBA(64, 184, 250, .5);font-size:34px;line-height:1;font-weight:700;">❝</span> <p style="padding-top:8px;padding-bottom:8px;letter-spacing:2px;font-size:14px;word-spacing:2px;margin:0px;line-height:26px;color:#595959;">Vuex 自带一个日志插件用于一般的调试，生成状态快照，对比出改变前后不同的值。<br>
注：logger 插件会生成状态快照，所以仅在开发环境使用</p> <span style="float:right;color:RGBA(64, 184, 250, .5);">❞</span></blockquote> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>(1) 在Vuex的文件中引入createLogger</span><span class="suffix" style="display:none;"></span></h4> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">import Vue from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;vue&quot;</span>;<br>import Vuex from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;vuex&quot;</span>;<br>// 直接引入Vuex中的日志组件就可以了，不需要安装依赖，因为是Vuex自带的<br>import createLogger from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;vuex/dist/logger&quot;</span>; <br>import state from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;./state&quot;</span>;<br>import * as actions from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;./actions&quot;</span>;<br>import * as mutations from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;./mutations&quot;</span>;<br> <br>Vue.use(Vuex);<br>// 开发环境中为<span class="hljs-literal" style="color:#f92672;font-weight:bold;line-height:26px;">true</span>，否则为<span class="hljs-literal" style="color:#f92672;font-weight:bold;line-height:26px;">false</span><br>const debug = process.env.NODE_ENV !== <span class="hljs-string" style="color:#a6e22e;line-height:26px;">&quot;production&quot;</span>; <br> <br><span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">export</span> default new Vuex.Store({<br>    state,<br>    actions,<br>    mutations,<br>    // 开发环境下显示vuex的状态修改，注意：Vuex中所有插件配置需要写在plugins中<br>    plugins: debug ? [createLogger()] : []<br>});<br></code></pre> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>（2）使用后的效果</span><span class="suffix" style="display:none;"></span></h4> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;font-size:15px;color:#595959;list-style-type:circle;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">prev会列出state中所有执行此方法前的值</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">当我们通过mutations保存数据的时候，会显示当前执行的mutations方法，这里的savePath就是其中的一个方法,mutation中会列出当前方法以及传递的参数</section></li><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:normal;color:#595959;">next会列出state中执行此方法后的值</section></li></ul> <p data-tool="mdnice编辑器" style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0px;letter-spacing:2px;font-size:14px;word-spacing:2px;"><a data-fancybox="" title="flex-shrink" href="/vuex1.png" style="text-decoration:none;word-wrap:break-word;color:#40B8FA;font-weight:normal;border-bottom:1px solid #3BAAFA;"><img src="/vuex1.png" alt="flex-shrink" style="max-width:100%;border-radius:6px;display:block;margin:20px auto;object-fit:contain;box-shadow:2px 4px 7px #999;"></a></p> <h3 data-tool="mdnice编辑器" style="padding:0px;color:black;font-size:17px;font-weight:bold;text-align:center;position:relative;margin-top:20px;margin-bottom:20px;"><span class="prefix" style="display:none;"></span><span class="content" style="border-bottom:2px solid RGBA(79, 177, 249, .65);color:#2b2b2b;padding-bottom:2px;"><span style="width:30px;height:30px;display:block;background-image:url(https://my-wechat.mdnice.com/fullstack-2.png);background-position:center;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px;"></span>9. vuex页面刷新数据丢失的解决办法--vuex-persistedstate</span><span class="suffix" style="display:none;"></span></h3> <blockquote data-tool="mdnice编辑器" class="multiquote-1" style="display:block;font-size:0.9em;overflow:auto;overflow-scrolling:touch;padding-top:10px;padding-bottom:10px;padding-left:20px;padding-right:10px;margin-bottom:20px;margin-top:20px;text-size-adjust:100%;line-height:1.55em;font-weight:400;border-radius:6px;color:#595959;font-style:normal;text-align:left;box-sizing:inherit;border-left:none;border:1px solid RGBA(64, 184, 250, .4);background:RGBA(64, 184, 250, .1);"><span style="color:RGBA(64, 184, 250, .5);font-size:34px;line-height:1;font-weight:700;">❝</span> <p style="padding-top:8px;padding-bottom:8px;letter-spacing:2px;font-size:14px;word-spacing:2px;margin:0px;line-height:26px;color:#595959;">为什么数据会丢失呢？因为<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:#3594F7;background:RGBA(59, 170, 250, .1);padding:0 2px;border-radius:2px;height:21px;line-height:22px;">store</code>里的数据是保存在<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:#3594F7;background:RGBA(59, 170, 250, .1);padding:0 2px;border-radius:2px;height:21px;line-height:22px;">运行内存</code>中的,当页面刷新时，页面会<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:#3594F7;background:RGBA(59, 170, 250, .1);padding:0 2px;border-radius:2px;height:21px;line-height:22px;">重新加载vue实例</code>，store里面的<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:#3594F7;background:RGBA(59, 170, 250, .1);padding:0 2px;border-radius:2px;height:21px;line-height:22px;">数据</code>就会被<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:#3594F7;background:RGBA(59, 170, 250, .1);padding:0 2px;border-radius:2px;height:21px;line-height:22px;">重新赋值初始化</code></p> <span style="float:right;color:RGBA(64, 184, 250, .5);">❞</span></blockquote> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>(1) 安装</span><span class="suffix" style="display:none;"></span></h4> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">npm install vuex-persistedstate  --save<br></code></pre> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content" style="height:16px;line-height:16px;font-size:16px;"><span style="background-image:url(https://my-wechat.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:15px;background-size:100%;background-position:left bottom;background-repeat:no-repeat;line-height:15px;margin-right:6px;margin-bottom:-2px;"></span>(2) 使用</span><span class="suffix" style="display:none;"></span></h4> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;background:#272822;color:#ddd;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0px;">import createPersistedState from <span class="hljs-string" style="color:#a6e22e;line-height:26px;">'vuex-persistedstate'</span><br> <br>const store = new Vuex.Store({<br>  state: {<br>    selected_card: {}, //用户选择的银行卡<br>  },<br>  mutations: {<br>    update_selected_card(state, payload) {<br>      state.selected_card = payload<br>    },<br>  },<br>    //这是把所有数据缓存到本地 也可以进行配置<br>  plugins: [createPersistedState()],<br>})<br> <br><span class="hljs-built_in" style="color:#a6e22e;line-height:26px;">export</span> default store;<br></code></pre></section></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/longweixia/assets/js/app.30853e2a.js" defer></script><script src="/longweixia/assets/js/2.19b4ab8a.js" defer></script><script src="/longweixia/assets/js/76.f804ad10.js" defer></script>
  </body>
</html>
